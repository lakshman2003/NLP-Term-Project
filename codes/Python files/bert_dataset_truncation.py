# -*- coding: utf-8 -*-
"""Bert_Dataset_Truncation.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1bDPetgTavGXZc5ysSh5GTy-BevWky-vh
"""

from google.colab import drive
drive.mount('/content/drive')

max_sent_length = 200

with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/bert_data/test/test_bert_sent.txt','r') as file:
  sentences = file.readlines()
  sentences = [x.strip() for x in sentences]
with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/model_data/test/test_bert_sent.txt','a') as file:
  for sentence in sentences:
    words = sentence.strip().split(' ')
    new_sentence = words[:max_sent_length]
    new_sentence = " ".join(new_sentence)
    file.write(new_sentence+'\n')

with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/bert_data/test/test_bert_pos.txt','r') as file:
  sentences = file.readlines()
  sentences = [x.strip() for x in sentences]
with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/model_data/test/test_bert_pos.txt','a') as file:
  for sentence in sentences:
    words = sentence.strip().split(' ')
    new_sentence = words[:max_sent_length]
    new_sentence = " ".join(new_sentence)
    file.write(new_sentence+'\n')

with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/bert_data/test/test_bert_dep.txt','r') as file:
  sentences = file.readlines()
  sentences = [x.strip() for x in sentences]
with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/model_data/test/test_bert_dep.txt','a') as file:
  for sentence in sentences:
    words = sentence.strip().split(' ')
    new_sentence = words[:max_sent_length]
    new_sentence = " ".join(new_sentence)
    file.write(new_sentence+'\n')

with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/bert_data/test/test_bert_pointer.txt','r') as file:
  pointers = file.readlines()
  pointers = [x.strip() for x in pointers]
with open('/content/drive/My Drive/NLP_Term_Project/dataset/english_ee/model_data/test/test_bert_pointer.txt','a') as file:
  for sent_pointers in pointers:
    tuples = sent_pointers.split(" | ")
    #print(tuples)
    truncated_tuples = []
    for tuple in tuples:
      elements = tuple.split(" ")
      if(len(elements) != 7):
        continue
      #print(elements)
      e_s = int(elements[0])
      e_e = int(elements[1])
      a_s = int(elements[3])
      a_e = int(elements[4])
      if(e_s>=max_sent_length or e_e>=max_sent_length or a_s>=max_sent_length or a_e>=max_sent_length):
        continue
      truncated_tuples.append(tuple)
    output_tuples = " | ".join(truncated_tuples)
    #output_tuples = output_tuples[:-3]
    file.write(output_tuples+'\n')